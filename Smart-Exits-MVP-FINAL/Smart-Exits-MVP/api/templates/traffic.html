<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>لوحة المرور - المخارج الذكية</title>
    <style>
        body { font-family: sans-serif; background: #f4f4f4; padding: 20px; }
        .card { background: white; padding: 20px; border-radius: 10px; margin-bottom: 20px; }
        h1 { color: #003399; }
        .btn {
            background: #d60000; color: white; padding: 10px 20px;
            border: none; border-radius: 6px; cursor: pointer;
        }
    </style>
</head>
<body>

<h1>توصيات المخارج الذكية للمرور</h1>

<div id="content" class="card">جاري التحميل...</div>

<script>
    async function loadData() {
        const res = await fetch("/api/smart_exits");
        const data = await res.json();

        const dash = data.traffic_authority_dashboard;

        document.getElementById("content").innerHTML = `
            <h2>${dash.alert}</h2>
            <p><strong>الإجراء الموصى به:</strong> ${dash.recommended_action}</p>
            <p><strong>معدل انخفاض السرعة:</strong> ${dash.predicted_traffic_stats.speed_drop_rate}</p>
            <p><strong>حركة المركبات الحالية:</strong> ${dash.predicted_traffic_stats.current_vehicle_count}</p>
            <button class="btn">تأكيد الإغلاق</button>
        `;
    }

    loadData();
</script>

</body>
</html>
